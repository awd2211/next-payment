# æ”¯ä»˜å¹³å°é¡¹ç›®çŠ¶æ€æŠ¥å‘Š

**æ›´æ–°æ—¶é—´**: 2025-10-23  
**é¡¹ç›®çŠ¶æ€**: âœ… å¼€å‘å®Œæˆï¼Œè¿è¡Œæ­£å¸¸

---

## ğŸ“Š é¡¹ç›®æ¦‚è§ˆ

### ç³»ç»Ÿæ¶æ„
- **åç«¯å¾®æœåŠ¡**: 10ä¸ªç‹¬ç«‹æœåŠ¡
- **å‰ç«¯åº”ç”¨**: 2ä¸ªï¼ˆAdmin Portal + Merchant Portalï¼‰
- **æ•°æ®åº“**: PostgreSQL 15 (10ä¸ªç‹¬ç«‹æ•°æ®åº“)
- **ç¼“å­˜**: Redis
- **çƒ­é‡è½½**: Air (Go æœåŠ¡)
- **æ„å»ºå·¥å…·**: Vite (å‰ç«¯)

---

## âœ… å®ŒæˆåŠŸèƒ½æ¸…å•

### åç«¯æœåŠ¡ (10ä¸ª)

| æœåŠ¡ | ç«¯å£ | çŠ¶æ€ | åŠŸèƒ½ |
|------|------|------|------|
| admin-service | 40001 | âœ“ | ç®¡ç†å‘˜ã€è§’è‰²ã€æƒé™ç®¡ç† |
| merchant-service | 40002 | âœ“ | å•†æˆ·è´¦æˆ·ç®¡ç† |
| payment-gateway | 40003 | âœ“ | æ”¯ä»˜ç½‘å…³ã€è·¯ç”± |
| order-service | 40004 | âœ“ | è®¢å•ç®¡ç† |
| channel-adapter | 40005 | âœ“ | æ”¯ä»˜æ¸ é“é€‚é… |
| risk-service | 40006 | âœ“ | é£æ§è§„åˆ™ã€æ£€æŸ¥ |
| accounting-service | 40007 | âœ“ | è´¦åŠ¡ã€ç»“ç®— |
| notification-service | 40008 | âœ“ | é€šçŸ¥ã€Webhook |
| analytics-service | 40009 | âœ“ | æ•°æ®åˆ†æã€æŒ‡æ ‡ |
| config-service | 40010 | âœ“ | ç³»ç»Ÿé…ç½®ç®¡ç† |

### å‰ç«¯åº”ç”¨ (2ä¸ª)

| åº”ç”¨ | ç«¯å£ | çŠ¶æ€ | å®ŒæˆåŠŸèƒ½ |
|------|------|------|----------|
| Admin Portal | 40101 | âœ“ | ç®¡ç†å‘˜ç®¡ç†ã€è§’è‰²æƒé™ã€å•†æˆ·ç®¡ç†ã€å®¡è®¡æ—¥å¿—ã€ç³»ç»Ÿé…ç½® |
| Merchant Portal | 40200 | âœ“ | è´¦æˆ·ä¿¡æ¯ã€äº¤æ˜“è®°å½•ã€è®¢å•ç®¡ç†ã€æ•°æ®å¯è§†åŒ–å›¾è¡¨ |

### æ•°æ®åº“ (10ä¸ª)

| æ•°æ®åº“ | è¡¨æ•°é‡ | çŠ¶æ€ | è¯´æ˜ |
|--------|--------|------|------|
| payment_admin | 47 | âœ“ | ç®¡ç†åå°æ ¸å¿ƒæ•°æ® |
| payment_merchant | 9 | âœ“ | å•†æˆ·æœåŠ¡æ•°æ® |
| payment_gateway | 4 | âœ“ | æ”¯ä»˜ç½‘å…³æ•°æ® |
| payment_order | 4 | âœ“ | è®¢å•æ•°æ® |
| payment_channel | 3 | âœ“ | æ¸ é“æ•°æ® |
| payment_risk | 3 | âœ“ | é£æ§æ•°æ® |
| payment_accounting | 4 | âœ“ | è´¦åŠ¡æ•°æ® |
| payment_notification | 4 | âœ“ | é€šçŸ¥æ•°æ® |
| payment_analytics | 4 | âœ“ | åˆ†ææ•°æ® |
| payment_config | 4 | âœ“ | é…ç½®æ•°æ® |
| **æ€»è®¡** | **86** | âœ“ | å…¨éƒ¨å®Œæˆ |

---

## ğŸ—‚ï¸ ç›®å½•ç»“æ„

```
/home/eric/payment/
â”œâ”€â”€ backend/                      # åç«¯æœåŠ¡
â”‚   â”œâ”€â”€ services/                # 10ä¸ªå¾®æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ admin-service/
â”‚   â”‚   â”œâ”€â”€ merchant-service/
â”‚   â”‚   â”œâ”€â”€ payment-gateway/
â”‚   â”‚   â”œâ”€â”€ order-service/
â”‚   â”‚   â”œâ”€â”€ channel-adapter/
â”‚   â”‚   â”œâ”€â”€ risk-service/
â”‚   â”‚   â”œâ”€â”€ accounting-service/
â”‚   â”‚   â”œâ”€â”€ notification-service/
â”‚   â”‚   â”œâ”€â”€ analytics-service/
â”‚   â”‚   â””â”€â”€ config-service/
â”‚   â”œâ”€â”€ pkg/                     # å…±äº«åŒ…
â”‚   â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â”œâ”€â”€ logger/
â”‚   â”‚   â”œâ”€â”€ middleware/
â”‚   â”‚   â””â”€â”€ migration/           # âœ¨ æ–°å¢
â”‚   â”œâ”€â”€ scripts/                 # ç®¡ç†è„šæœ¬
â”‚   â”‚   â”œâ”€â”€ start-all-services.sh
â”‚   â”‚   â”œâ”€â”€ stop-all-services.sh
â”‚   â”‚   â”œâ”€â”€ status-all-services.sh
â”‚   â”‚   â””â”€â”€ migrate.sh           # âœ¨ æ–°å¢
â”‚   â”œâ”€â”€ go.work                  # Go workspace
â”‚   â”œâ”€â”€ .env
â”‚   â””â”€â”€ MIGRATIONS.md            # âœ¨ æ–°å¢
â”‚
â”œâ”€â”€ frontend/                    # å‰ç«¯åº”ç”¨
â”‚   â”œâ”€â”€ admin-portal/            # ç®¡ç†åå°
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”‚   â””â”€â”€ stores/
â”‚   â”‚   â”œâ”€â”€ vite.config.ts
â”‚   â”‚   â””â”€â”€ package.json
â”‚   â”œâ”€â”€ merchant-portal/         # å•†æˆ·é—¨æˆ·
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”‚   â””â”€â”€ stores/
â”‚   â”‚   â”œâ”€â”€ vite.config.ts
â”‚   â”‚   â””â”€â”€ package.json
â”‚   â””â”€â”€ logs/
â”‚
â”œâ”€â”€ docker-compose.yml           # DockeræœåŠ¡
â””â”€â”€ README-MIGRATIONS.md         # âœ¨ æ–°å¢

```

---

## ğŸš€ å¿«é€Ÿå¯åŠ¨

### å¯åŠ¨åŸºç¡€è®¾æ–½
```bash
cd /home/eric/payment
docker-compose up -d
```

### å¯åŠ¨åç«¯æœåŠ¡
```bash
cd /home/eric/payment/backend
./scripts/start-all-services.sh
```

### å¯åŠ¨å‰ç«¯åº”ç”¨
```bash
# Admin Portal
cd /home/eric/payment/frontend/admin-portal
npm run dev

# Merchant Portal
cd /home/eric/payment/frontend/merchant-portal
npm run dev
```

### æŸ¥çœ‹æœåŠ¡çŠ¶æ€
```bash
cd /home/eric/payment/backend
./scripts/status-all-services.sh
```

---

## ğŸ” é»˜è®¤ç™»å½•ä¿¡æ¯

### Admin Portal (http://localhost:40101)
- ç”¨æˆ·å: `admin`
- å¯†ç : `admin123`
- è§’è‰²: super_adminï¼ˆæ‰€æœ‰æƒé™ï¼‰

### æ•°æ®åº“
- Host: localhost
- Port: 40432
- User: postgres
- Password: postgres
- Databases: payment_* (10ä¸ª)

---

## ğŸ“ æ•°æ®åº“è¿ç§»

### å½“å‰æ–¹æ¡ˆ
âœ… ä½¿ç”¨ **golang-migrate** è¿›è¡Œç‰ˆæœ¬æ§åˆ¶

### è¿ç§»æ–‡ä»¶ä½ç½®
```
services/{service-name}/migrations/
â”œâ”€â”€ 000001_init_schema.up.sql
â”œâ”€â”€ 000001_init_schema.down.sql
â”œâ”€â”€ 000002_seed_data.up.sql      # ä»… admin-service
â””â”€â”€ 000002_seed_data.down.sql    # ä»… admin-service
```

### å¸¸ç”¨å‘½ä»¤
```bash
# æŸ¥çœ‹è¿ç§»çŠ¶æ€
./scripts/migrate.sh status

# æ‰§è¡Œè¿ç§»ï¼ˆå…¨éƒ¨æœåŠ¡ï¼‰
./scripts/migrate.sh up all

# æ‰§è¡Œè¿ç§»ï¼ˆå•ä¸ªæœåŠ¡ï¼‰
./scripts/migrate.sh up admin-service

# æŸ¥çœ‹ç‰ˆæœ¬
./scripts/migrate.sh version all

# å›æ»šè¿ç§»
./scripts/migrate.sh down admin-service 1
```

### è¯¦ç»†æ–‡æ¡£
- [backend/MIGRATIONS.md](backend/MIGRATIONS.md)
- [README-MIGRATIONS.md](README-MIGRATIONS.md)

---

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### åç«¯
- **è¯­è¨€**: Go 1.21+
- **æ¡†æ¶**: Gin
- **ORM**: GORM
- **æ•°æ®åº“**: PostgreSQL 15
- **ç¼“å­˜**: Redis
- **æ—¥å¿—**: Zap
- **è¿ç§»**: golang-migrate v4.19.0
- **çƒ­é‡è½½**: Air v1.49.0

### å‰ç«¯
- **æ¡†æ¶**: React 18
- **æ„å»ºå·¥å…·**: Vite 5
- **UIåº“**: Ant Design 5
- **çŠ¶æ€ç®¡ç†**: Zustand
- **HTTPå®¢æˆ·ç«¯**: Axios
- **è·¯ç”±**: React Router v6
- **å›¾è¡¨**: @ant-design/charts
- **æ—¥æœŸå¤„ç†**: dayjs

### åŸºç¡€è®¾æ–½
- **å®¹å™¨**: Docker + Docker Compose
- **åå‘ä»£ç†**: (å¾…é…ç½®)
- **ç›‘æ§**: (å¾…é…ç½®)

---

## ğŸ“‹ å·²å®Œæˆçš„å‰ç«¯åŠŸèƒ½

### Admin Portal (ç®¡ç†åå°)
- âœ… ç™»å½•è®¤è¯
- âœ… ä»ªè¡¨æ¿
- âœ… ç®¡ç†å‘˜ç®¡ç†ï¼ˆCRUD + å¯†ç é‡ç½®ï¼‰
- âœ… è§’è‰²æƒé™ç®¡ç†ï¼ˆè§’è‰²CRUD + æƒé™åˆ†é… + æƒé™æ ‘ï¼‰
- âœ… å•†æˆ·ç®¡ç†ï¼ˆåˆ›å»ºã€å®¡æ‰¹ã€å†»ç»“ã€ç¼–è¾‘ã€åˆ é™¤ã€KYCéªŒè¯ï¼‰
- âœ… å®¡è®¡æ—¥å¿—æŸ¥è¯¢ï¼ˆåˆ—è¡¨ã€ç­›é€‰ã€CSVå¯¼å‡ºï¼‰
- âœ… ç³»ç»Ÿé…ç½®ç®¡ç†

### Merchant Portal (å•†æˆ·é—¨æˆ·)
- âœ… ç™»å½•è®¤è¯
- âœ… ä»ªè¡¨æ¿ï¼ˆæ•°æ®å¯è§†åŒ–å›¾è¡¨ï¼‰
- âœ… è´¦æˆ·ä¿¡æ¯ï¼ˆä¿¡æ¯å±•ç¤ºã€ç¼–è¾‘ã€ä½™é¢æŸ¥è¯¢ï¼‰
- âœ… äº¤æ˜“è®°å½•æŸ¥è¯¢ï¼ˆåˆ—è¡¨ã€ç­›é€‰ã€è¯¦æƒ…ã€CSVå¯¼å‡ºï¼‰
- âœ… è®¢å•ç®¡ç†ï¼ˆåˆ—è¡¨ã€è¯¦æƒ…ã€å–æ¶ˆè®¢å•ï¼‰
- âœ… æ•°æ®å¯è§†åŒ–ï¼ˆäº¤æ˜“è¶‹åŠ¿ã€æ¸ é“åˆ†å¸ƒã€æ”¯ä»˜æ–¹å¼ç»Ÿè®¡ï¼‰

---

## ğŸ¯ ä¸‹ä¸€æ­¥å»ºè®®

### çŸ­æœŸï¼ˆ1-2å‘¨ï¼‰
1. [ ] é›†æˆç¬¬ä¸‰æ–¹æ”¯ä»˜æ¸ é“ï¼ˆStripe/PayPalï¼‰
2. [ ] å®Œå–„å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•
3. [ ] é…ç½® CI/CD æµç¨‹
4. [ ] æ·»åŠ  API æ–‡æ¡£ï¼ˆSwaggerï¼‰

### ä¸­æœŸï¼ˆ1-2æœˆï¼‰
1. [ ] æ€§èƒ½ä¼˜åŒ–å’Œå‹åŠ›æµ‹è¯•
2. [ ] é…ç½®ç›‘æ§å’Œå‘Šè­¦ï¼ˆPrometheus + Grafanaï¼‰
3. [ ] å®ç°åˆ†å¸ƒå¼è¿½è¸ªï¼ˆJaegerï¼‰
4. [ ] å®Œå–„æ—¥å¿—æ”¶é›†ï¼ˆELK Stackï¼‰

### é•¿æœŸï¼ˆ3-6æœˆï¼‰
1. [ ] å®ç°æœåŠ¡ç½‘æ ¼ï¼ˆIstio/Linkerdï¼‰
2. [ ] Kubernetes éƒ¨ç½²
3. [ ] å¤šç§Ÿæˆ·æ”¯æŒ
4. [ ] å›½é™…åŒ–ï¼ˆi18nï¼‰

---

## ğŸ“– ç›¸å…³æ–‡æ¡£

- [æ•°æ®åº“è¿ç§»æŒ‡å—](backend/MIGRATIONS.md)
- [è¿ç§»æ€»ç»“](README-MIGRATIONS.md)
- [ç«¯å£é…ç½®](docs/PORT_CONFIGURATION.md) _(å¾…åˆ›å»º)_
- [APIæ–‡æ¡£](docs/API.md) _(å¾…åˆ›å»º)_
- [éƒ¨ç½²æŒ‡å—](docs/DEPLOYMENT.md) _(å¾…åˆ›å»º)_

---

## ğŸ¤ å›¢é˜Ÿåä½œ

### Git å·¥ä½œæµ
- ä½¿ç”¨åˆ†æ”¯ç­–ç•¥ï¼ˆmain/develop/featureï¼‰
- ä»£ç å®¡æŸ¥ï¼ˆPR Reviewï¼‰
- è¿ç§»æ–‡ä»¶å¿…é¡»åŒ…å«åœ¨ç‰ˆæœ¬æ§åˆ¶ä¸­

### è¿ç§»ç®¡ç†
- æ–°è¿ç§»ä½¿ç”¨é€’å¢ç‰ˆæœ¬å·
- æäº¤å‰æµ‹è¯• up/down æµç¨‹
- è®°å½•é‡è¦å˜æ›´è¯´æ˜

---

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **å®‰å…¨**
   - ç”Ÿäº§ç¯å¢ƒå¿…é¡»ä¿®æ”¹é»˜è®¤å¯†ç 
   - é…ç½®é˜²ç«å¢™è§„åˆ™
   - å¯ç”¨ HTTPS/TLS
   - å®šæœŸå®‰å…¨å®¡è®¡

2. **æ€§èƒ½**
   - ç›‘æ§æ•°æ®åº“æŸ¥è¯¢æ€§èƒ½
   - é…ç½®è¿æ¥æ± 
   - å¯ç”¨ç¼“å­˜ç­–ç•¥

3. **å¤‡ä»½**
   - å®šæœŸå¤‡ä»½æ•°æ®åº“
   - æµ‹è¯•æ¢å¤æµç¨‹
   - ä¿ç•™è¿ç§»å†å²

4. **ç›‘æ§**
   - é…ç½®æœåŠ¡å¥åº·æ£€æŸ¥
   - è®¾ç½®å‘Šè­¦è§„åˆ™
   - æ”¶é›†æ€§èƒ½æŒ‡æ ‡

---

## ğŸ“ è”ç³»æ–¹å¼

- é¡¹ç›®ä½ç½®: `/home/eric/payment/`
- æ–‡æ¡£ç›®å½•: `/home/eric/payment/docs/` _(å¾…åˆ›å»º)_
- æ—¥å¿—ç›®å½•: `/home/eric/payment/backend/logs/`

---

**æœ€åæ›´æ–°**: 2025-10-23  
**é¡¹ç›®çŠ¶æ€**: âœ… å¼€å‘å®Œæˆï¼Œå¯æŠ•å…¥ä½¿ç”¨
