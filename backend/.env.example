# ============================================
# Payment Platform Environment Configuration
# ============================================
# Copy this file to .env and update with your values

# -----------------
# Environment
# -----------------
ENV=development

# -----------------
# Database (PostgreSQL)
# -----------------
DB_HOST=localhost
DB_PORT=40432
DB_USER=postgres
DB_PASSWORD=postgres
DB_SSL_MODE=disable
DB_TIMEZONE=UTC
DB_MAX_IDLE_CONNS=10
DB_MAX_OPEN_CONNS=100

# Service-specific databases (Updated 2025-10-26)
DB_NAME_ADMIN=payment_admin
DB_NAME_MERCHANT=payment_merchant
DB_NAME_GATEWAY=payment_gateway
DB_NAME_ORDER=payment_order
DB_NAME_CHANNEL=payment_channel
DB_NAME_RISK=payment_risk
DB_NAME_NOTIFICATION=payment_notification
DB_NAME_ACCOUNTING=payment_accounting
DB_NAME_ANALYTICS=payment_analytics
DB_NAME_CONFIG=payment_config
DB_NAME_MERCHANT_AUTH=payment_merchant_auth
DB_NAME_MERCHANT_POLICY=payment_merchant_policy
DB_NAME_MERCHANT_QUOTA=payment_merchant_quota
DB_NAME_SETTLEMENT=payment_settlement
DB_NAME_WITHDRAWAL=payment_withdrawal
DB_NAME_KYC=payment_kyc
DB_NAME_CASHIER=payment_cashier
DB_NAME_RECONCILIATION=payment_reconciliation
DB_NAME_DISPUTE=payment_dispute

# -----------------
# Redis
# -----------------
REDIS_HOST=localhost
REDIS_PORT=40379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_MAX_RETRIES=3
REDIS_POOL_SIZE=10

# -----------------
# Kafka
# -----------------
KAFKA_BROKERS=localhost:40092
KAFKA_GROUP_ID=payment-platform
KAFKA_TOPIC_PAYMENT=payment-events
KAFKA_TOPIC_ORDER=order-events
KAFKA_TOPIC_NOTIFICATION=notification-events

# -----------------
# Service Ports (Updated 2025-10-26)
# -----------------
# Core services (40001-40016)
PORT_ADMIN_BFF=40001
PORT_MERCHANT=40002
PORT_GATEWAY=40003
PORT_ORDER=40004
PORT_CHANNEL=40005
PORT_RISK=40006
PORT_ACCOUNTING=40007
PORT_NOTIFICATION=40008
PORT_ANALYTICS=40009
PORT_CONFIG=40010
PORT_MERCHANT_AUTH=40011
PORT_MERCHANT_POLICY=40012
PORT_SETTLEMENT=40013
PORT_WITHDRAWAL=40014
PORT_KYC=40015
PORT_CASHIER=40016

# Extended services (40020-40023)
PORT_RECONCILIATION=40020
PORT_DISPUTE=40021
PORT_MERCHANT_QUOTA=40022
PORT_MERCHANT_BFF=40023

# -----------------
# Service URLs (for inter-service communication) (Updated 2025-10-26)
# -----------------
# Core services
ADMIN_BFF_SERVICE_URL=http://localhost:40001
MERCHANT_SERVICE_URL=http://localhost:40002
PAYMENT_GATEWAY_URL=http://localhost:40003
ORDER_SERVICE_URL=http://localhost:40004
CHANNEL_SERVICE_URL=http://localhost:40005
RISK_SERVICE_URL=http://localhost:40006
ACCOUNTING_SERVICE_URL=http://localhost:40007
NOTIFICATION_SERVICE_URL=http://localhost:40008
ANALYTICS_SERVICE_URL=http://localhost:40009
CONFIG_SERVICE_URL=http://localhost:40010
MERCHANT_AUTH_SERVICE_URL=http://localhost:40011
MERCHANT_POLICY_SERVICE_URL=http://localhost:40012
SETTLEMENT_SERVICE_URL=http://localhost:40013
WITHDRAWAL_SERVICE_URL=http://localhost:40014
KYC_SERVICE_URL=http://localhost:40015
CASHIER_SERVICE_URL=http://localhost:40016

# Extended services
RECONCILIATION_SERVICE_URL=http://localhost:40020
DISPUTE_SERVICE_URL=http://localhost:40021
MERCHANT_QUOTA_SERVICE_URL=http://localhost:40022
MERCHANT_BFF_SERVICE_URL=http://localhost:40023

# -----------------
# Authentication
# -----------------
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production
JWT_EXPIRATION_HOURS=24

# Payment Gateway API Signature
SIGNATURE_SECRET=your-signature-secret-change-this-in-production

# -----------------
# Observability
# -----------------
# Prometheus (metrics on /metrics endpoint)
METRICS_ENABLED=true

# Jaeger (distributed tracing)
JAEGER_ENDPOINT=http://localhost:40268/api/traces
JAEGER_SAMPLING_RATE=100

# Logging
LOG_LEVEL=info
LOG_FORMAT=json

# -----------------
# Payment Channels
# -----------------
# Stripe
STRIPE_API_KEY=sk_test_your_stripe_secret_key
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret
STRIPE_PUBLIC_KEY=pk_test_your_stripe_public_key

# PayPal (placeholder)
PAYPAL_CLIENT_ID=your_paypal_client_id
PAYPAL_CLIENT_SECRET=your_paypal_client_secret
PAYPAL_MODE=sandbox

# Cryptocurrency (placeholder)
CRYPTO_API_KEY=your_crypto_api_key
CRYPTO_WEBHOOK_SECRET=your_crypto_webhook_secret

# -----------------
# Notification
# -----------------
# Email (SMTP)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=your-email@gmail.com
SMTP_PASSWORD=your-app-password
SMTP_FROM=noreply@payment-platform.com

# Mailgun (alternative)
MAILGUN_DOMAIN=mg.your-domain.com
MAILGUN_API_KEY=your-mailgun-api-key

# SMS (placeholder)
SMS_PROVIDER=twilio
SMS_API_KEY=your_sms_api_key
SMS_API_SECRET=your_sms_api_secret

# -----------------
# Rate Limiting
# -----------------
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW_SECONDS=60

# -----------------
# Circuit Breaker
# -----------------
CIRCUIT_BREAKER_ENABLED=true
CIRCUIT_BREAKER_THRESHOLD=5
CIRCUIT_BREAKER_TIMEOUT_SECONDS=60

# -----------------
# Settlement
# -----------------
SETTLEMENT_AUTO_ENABLED=true
SETTLEMENT_DAILY_TIME=03:00
SETTLEMENT_MIN_AMOUNT=100

# -----------------
# Withdrawal
# -----------------
WITHDRAWAL_FEE_NORMAL=0.001
WITHDRAWAL_FEE_URGENT=0.005
WITHDRAWAL_FEE_SCHEDULED=0.0005
WITHDRAWAL_MIN_AMOUNT=1000
WITHDRAWAL_MAX_AMOUNT=1000000000

# -----------------
# KYC
# -----------------
KYC_AUTO_REVIEW_ENABLED=false
KYC_OCR_ENABLED=false
KYC_OCR_API_KEY=your_ocr_api_key

# -----------------
# Risk Control
# -----------------
RISK_AUTO_BLOCK_ENABLED=true
RISK_MAX_FAILED_ATTEMPTS=5
RISK_BLOCK_DURATION_HOURS=24

# -----------------
# Monitoring Dashboards
# -----------------
# Access URLs (when using Docker Compose)
# Grafana: http://localhost:40300 (admin/admin)
# Prometheus: http://localhost:40090
# Jaeger UI: http://localhost:40686

# -----------------
# Development
# -----------------
# Hot reload with Air
AIR_ENABLED=false

# Debug mode
DEBUG=false
