{
    "swagger": "2.0",
    "info": {
        "description": "支付平台管理后台服务API文档",
        "title": "Admin Service API",
        "termsOfService": "http://swagger.io/terms/",
        "contact": {
            "name": "API Support",
            "url": "http://www.swagger.io/support",
            "email": "support@swagger.io"
        },
        "license": {
            "name": "Apache 2.0",
            "url": "http://www.apache.org/licenses/LICENSE-2.0.html"
        },
        "version": "1.0"
    },
    "host": "localhost:40001",
    "basePath": "/api/v1",
    "paths": {
        "/api/v1/preferences": {
            "get": {
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Preferences"
                ],
                "summary": "获取用户偏好设置",
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "object",
                            "additionalProperties": true
                        }
                    }
                }
            },
            "put": {
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Preferences"
                ],
                "summary": "更新用户偏好设置",
                "parameters": [
                    {
                        "description": "更新偏好设置请求",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/payment-platform_admin-service_internal_service.UpdatePreferencesInput"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "object",
                            "additionalProperties": true
                        }
                    }
                }
            }
        },
        "/api/v1/security/2fa/backup-codes": {
            "post": {
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Security"
                ],
                "summary": "重新生成备用恢复代码",
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "object",
                            "additionalProperties": true
                        }
                    }
                }
            }
        },
        "/api/v1/security/2fa/disable": {
            "post": {
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Security"
                ],
                "summary": "禁用双因素认证",
                "parameters": [
                    {
                        "description": "禁用2FA请求",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/internal_handler.Disable2FARequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "object",
                            "additionalProperties": true
                        }
                    }
                }
            }
        },
        "/api/v1/security/2fa/setup": {
            "post": {
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Security"
                ],
                "summary": "设置双因素认证",
                "parameters": [
                    {
                        "description": "设置2FA请求",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/internal_handler.Setup2FARequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/payment-platform_admin-service_internal_service.Setup2FAResponse"
                        }
                    }
                }
            }
        },
        "/api/v1/security/2fa/verify": {
            "post": {
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Security"
                ],
                "summary": "验证并启用2FA",
                "parameters": [
                    {
                        "description": "验证2FA请求",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/internal_handler.Verify2FARequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "object",
                            "additionalProperties": true
                        }
                    }
                }
            }
        },
        "/api/v1/security/abnormal-activities": {
            "get": {
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Security"
                ],
                "summary": "获取异常登录活动",
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "object",
                            "additionalProperties": true
                        }
                    }
                }
            }
        },
        "/api/v1/security/change-password": {
            "post": {
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Security"
                ],
                "summary": "修改密码",
                "parameters": [
                    {
                        "description": "修改密码请求",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/internal_handler.ChangePasswordRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "object",
                            "additionalProperties": true
                        }
                    }
                }
            }
        },
        "/api/v1/security/login-activities": {
            "get": {
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Security"
                ],
                "summary": "获取登录活动记录",
                "parameters": [
                    {
                        "type": "integer",
                        "default": 50,
                        "description": "记录数量",
                        "name": "limit",
                        "in": "query"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "object",
                            "additionalProperties": true
                        }
                    }
                }
            }
        },
        "/api/v1/security/sessions": {
            "get": {
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Security"
                ],
                "summary": "获取活跃会话列表",
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "object",
                            "additionalProperties": true
                        }
                    }
                }
            }
        },
        "/api/v1/security/sessions/deactivate": {
            "post": {
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Security"
                ],
                "summary": "停用指定会话",
                "parameters": [
                    {
                        "description": "停用会话请求",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/internal_handler.DeactivateSessionRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "object",
                            "additionalProperties": true
                        }
                    }
                }
            }
        },
        "/api/v1/security/sessions/deactivate-others": {
            "post": {
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Security"
                ],
                "summary": "停用其他所有会话",
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "object",
                            "additionalProperties": true
                        }
                    }
                }
            }
        },
        "/api/v1/security/settings": {
            "get": {
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Security"
                ],
                "summary": "获取安全设置",
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "object",
                            "additionalProperties": true
                        }
                    }
                }
            },
            "put": {
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Security"
                ],
                "summary": "更新安全设置",
                "parameters": [
                    {
                        "description": "更新安全设置请求",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/payment-platform_admin-service_internal_service.UpdateSecuritySettingsInput"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "object",
                            "additionalProperties": true
                        }
                    }
                }
            }
        },
        "/system-configs": {
            "get": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "分页查询系统配置列表，支持按类别过滤",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "系统配置"
                ],
                "summary": "获取系统配置列表",
                "parameters": [
                    {
                        "type": "integer",
                        "default": 1,
                        "description": "页码",
                        "name": "page",
                        "in": "query"
                    },
                    {
                        "type": "integer",
                        "default": 20,
                        "description": "每页数量",
                        "name": "page_size",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "配置类别",
                        "name": "category",
                        "in": "query"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/payment-platform_admin-service_internal_response.ListResponse"
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/payment-platform_admin-service_internal_response.Response"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/payment-platform_admin-service_internal_response.Response"
                        }
                    }
                }
            },
            "post": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "创建新的系统配置项",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "系统配置"
                ],
                "summary": "创建系统配置",
                "parameters": [
                    {
                        "description": "配置信息",
                        "name": "config",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/internal_handler.CreateConfigRequest"
                        }
                    }
                ],
                "responses": {
                    "201": {
                        "description": "Created",
                        "schema": {
                            "$ref": "#/definitions/payment-platform_admin-service_internal_response.Response"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/payment-platform_admin-service_internal_response.Response"
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/payment-platform_admin-service_internal_response.Response"
                        }
                    },
                    "409": {
                        "description": "Conflict",
                        "schema": {
                            "$ref": "#/definitions/payment-platform_admin-service_internal_response.Response"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/payment-platform_admin-service_internal_response.Response"
                        }
                    }
                }
            }
        }
    },
    "definitions": {
        "internal_handler.ChangePasswordRequest": {
            "type": "object",
            "required": [
                "new_password",
                "old_password"
            ],
            "properties": {
                "new_password": {
                    "type": "string",
                    "minLength": 8
                },
                "old_password": {
                    "type": "string"
                }
            }
        },
        "internal_handler.CreateConfigRequest": {
            "type": "object",
            "required": [
                "category",
                "key",
                "type",
                "value"
            ],
            "properties": {
                "category": {
                    "type": "string"
                },
                "description": {
                    "type": "string"
                },
                "is_public": {
                    "type": "boolean"
                },
                "key": {
                    "type": "string"
                },
                "type": {
                    "type": "string"
                },
                "value": {
                    "type": "string"
                }
            }
        },
        "internal_handler.DeactivateSessionRequest": {
            "type": "object",
            "required": [
                "session_id"
            ],
            "properties": {
                "session_id": {
                    "type": "string"
                }
            }
        },
        "internal_handler.Disable2FARequest": {
            "type": "object",
            "required": [
                "password"
            ],
            "properties": {
                "password": {
                    "description": "密码验证",
                    "type": "string"
                }
            }
        },
        "internal_handler.Setup2FARequest": {
            "type": "object",
            "required": [
                "account_name"
            ],
            "properties": {
                "account_name": {
                    "description": "账户名称（如邮箱）",
                    "type": "string"
                }
            }
        },
        "internal_handler.Verify2FARequest": {
            "type": "object",
            "required": [
                "code"
            ],
            "properties": {
                "code": {
                    "description": "6位验证码",
                    "type": "string"
                }
            }
        },
        "payment-platform_admin-service_internal_response.ErrorCode": {
            "type": "string",
            "enum": [
                "BAD_REQUEST",
                "UNAUTHORIZED",
                "FORBIDDEN",
                "NOT_FOUND",
                "CONFLICT",
                "INTERNAL_SERVER_ERROR",
                "VALIDATION_ERROR",
                "INVALID_CREDENTIALS",
                "ACCOUNT_LOCKED",
                "PERMISSION_DENIED",
                "RESOURCE_EXISTS",
                "RESOURCE_NOT_FOUND",
                "OPERATION_FAILED"
            ],
            "x-enum-varnames": [
                "ErrCodeBadRequest",
                "ErrCodeUnauthorized",
                "ErrCodeForbidden",
                "ErrCodeNotFound",
                "ErrCodeConflict",
                "ErrCodeInternalServer",
                "ErrCodeValidation",
                "ErrCodeInvalidCredentials",
                "ErrCodeAccountLocked",
                "ErrCodePermissionDenied",
                "ErrCodeResourceExists",
                "ErrCodeResourceNotFound",
                "ErrCodeOperationFailed"
            ]
        },
        "payment-platform_admin-service_internal_response.ErrorInfo": {
            "type": "object",
            "properties": {
                "code": {
                    "description": "错误代码",
                    "allOf": [
                        {
                            "$ref": "#/definitions/payment-platform_admin-service_internal_response.ErrorCode"
                        }
                    ]
                },
                "details": {
                    "description": "详细信息（用于调试）",
                    "type": "string"
                },
                "message": {
                    "description": "错误消息",
                    "type": "string"
                }
            }
        },
        "payment-platform_admin-service_internal_response.ListResponse": {
            "type": "object",
            "properties": {
                "data": {
                    "description": "数据列表"
                },
                "message": {
                    "description": "消息",
                    "type": "string"
                },
                "pagination": {
                    "description": "分页信息",
                    "allOf": [
                        {
                            "$ref": "#/definitions/payment-platform_admin-service_internal_response.PaginationInfo"
                        }
                    ]
                },
                "success": {
                    "description": "是否成功",
                    "type": "boolean"
                }
            }
        },
        "payment-platform_admin-service_internal_response.PaginationInfo": {
            "type": "object",
            "properties": {
                "page": {
                    "description": "当前页",
                    "type": "integer"
                },
                "page_size": {
                    "description": "每页数量",
                    "type": "integer"
                },
                "total": {
                    "description": "总数",
                    "type": "integer"
                },
                "total_page": {
                    "description": "总页数",
                    "type": "integer"
                }
            }
        },
        "payment-platform_admin-service_internal_response.Response": {
            "type": "object",
            "properties": {
                "code": {
                    "description": "错误代码",
                    "allOf": [
                        {
                            "$ref": "#/definitions/payment-platform_admin-service_internal_response.ErrorCode"
                        }
                    ]
                },
                "data": {
                    "description": "数据"
                },
                "error": {
                    "description": "错误详情",
                    "allOf": [
                        {
                            "$ref": "#/definitions/payment-platform_admin-service_internal_response.ErrorInfo"
                        }
                    ]
                },
                "message": {
                    "description": "消息",
                    "type": "string"
                },
                "success": {
                    "description": "是否成功",
                    "type": "boolean"
                }
            }
        },
        "payment-platform_admin-service_internal_service.Setup2FAResponse": {
            "type": "object",
            "properties": {
                "backup_codes": {
                    "description": "备用恢复代码",
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "qr_code_url": {
                    "description": "二维码URL",
                    "type": "string"
                },
                "secret": {
                    "description": "TOTP密钥",
                    "type": "string"
                }
            }
        },
        "payment-platform_admin-service_internal_service.UpdatePreferencesInput": {
            "type": "object",
            "properties": {
                "currency": {
                    "description": "货币",
                    "type": "string"
                },
                "dashboard_layout": {
                    "description": "仪表板布局",
                    "type": "object",
                    "additionalProperties": true
                },
                "date_format": {
                    "description": "日期格式",
                    "type": "string"
                },
                "language": {
                    "description": "语言",
                    "type": "string"
                },
                "notification_prefs": {
                    "description": "通知偏好",
                    "type": "object",
                    "additionalProperties": true
                },
                "number_format": {
                    "description": "数字格式",
                    "type": "string"
                },
                "theme": {
                    "description": "主题",
                    "type": "string"
                },
                "time_format": {
                    "description": "时间格式",
                    "type": "string"
                },
                "timezone": {
                    "description": "时区",
                    "type": "string"
                }
            }
        },
        "payment-platform_admin-service_internal_service.UpdateSecuritySettingsInput": {
            "type": "object",
            "properties": {
                "abnormal_notification": {
                    "type": "boolean"
                },
                "allowed_countries": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "blocked_countries": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "ip_whitelist": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "login_notification": {
                    "type": "boolean"
                },
                "max_concurrent_sessions": {
                    "type": "integer"
                },
                "password_expiry_days": {
                    "type": "integer"
                },
                "session_timeout_minutes": {
                    "type": "integer"
                }
            }
        }
    },
    "securityDefinitions": {
        "BearerAuth": {
            "description": "Bearer JWT token",
            "type": "apiKey",
            "name": "Authorization",
            "in": "header"
        }
    }
}